workflows:
  build:
    name: Build Apk
    max_build_duration: 30
    environment:
      vars:
        GCLOUD_SERVICE_ACCOUNT_CREDENTIALS: Encrypted(Z0FBQUFBQmc0SWgwZF9mcTZIOUVma2NyZE02NkhRYW40RzB4X0RYZ2ZCdHVzY3NjVGV2RmVJa0gzQlNGcVBzX0FHSEhvNFU4cmNvSy1BNG5Rc0xFenYtQTNkRG5BYVBsRTJqRHhuNGwxNFUyYzhkQmU4UVE5ajVuQ042YzN5Rk1xN2pkUGJLM2diRG8zVDk2NWRKUVhGZE1DV0I1VHVoajdSMWtMSlhzOHVKc0hJS1ZaSm5JWWVZSEtxTkZTeFY5Z04yTnd3aEJIYjVaclV0N3BWYWxnaHFUV3Z1UXlJeElTdDlCZV9tdkRDYThTQnl2bW1nNXc3cXFhSDFkV2FVbXdLUGRhaVdEQUtkWW16N1FMTVR4cUJqSHljTTJNRGtiT3JsQVlNNHhDQU1YYk80MDdrWEZyb1pfcVJkbi04Q1pGLTNoRHYxcDNUN21PY3c5VGJuNGpvTG1NN3RBZVB4OHhEVUw0aGE1azNqc1dzQXktb0lfdUFCcEluNUhZRmthQ1NwU0lvMHVhdzRyM2FiUzFseTN3Z3pQZmI3MEdORFVRRUZNTFB6SGVTMlRrLXRMQklPRG8tX3c0WFFnUzYwQmRsazlfbFNraXZaM2lsWnM2VVlKNjJiUGptQi1janFEQ1YxSGdyUzk2NXIzTUFBU1djQ2w3Qk1pWGZGSjFfb25LVGtOWEQzZFNoTUhXVkducWVzSWUzSUtic2haam93SWlldVFDaTA3ZllvRFRhOHhVRXFpd3RYaHNUT1RFeTBtcEUzb25JQ2ZNS0hjaGE1TFU2UElUZmMyRVN3b25PSlltUXZoejJtZ3hxaTFId2ZBMEtrcTM3X3gtNE1xLW5FN191a0JsVGlTR2lKNE5La09HaWc1dmQyY3VFd1MySmxKZjBqdGhaVmxVOVFZZW1iM2FWT25FaEtvTGduX2xEdW1RZDI3SXJIVGhmS09zWWxYVUxBWXpTNWJHeTJUVkVScUZVekxsdmxUWmJRZ2ZoaEJsX0d6S1MxWGxnU3o3eFlfd0F2NnNFNGkwS2VoX2xFZ2hSeUFpc0IxekxvZkxDeWZYR1RyVHVEZ2Z2RTF1YzRWSTBRWEMxdjU2LXZ3azZaN1JUTHFuT3pwMXZLWWd1MFBHcHhoTWNWMEZGVHhfbThZLW1NWEw1Y3g1ZFZoaVRkeDAtMWdFSGxFcjgzWU1lbkc3enM3TnRySEpYOGVDYWpkd0JYVXFZOV9CbUxUSFgyekNiUFhNczlnWXEzUUJpYmlDWk43a2JkVUoyT25LWmdhME5RVHBtbDFWMjdIUVNfYTdCVVBGUkx5MXREakc2TWY5Z29RUDFudTVFRmtXYmh2cVlhN1laRmtzNFh4NnB3WHc2Zi1qbGhhZ0FBTGw4MnZvVVp4VGc4NzVhVW1ITGNLVmMyeW9BVmdVVm9qckpaaF92aDh0N01kS1ZFYjBnN2tqM1Z2bXlEclMydnFSYWROVXhXN0RZYnNxcGJ2SmIwRTdCaENzYUdNczNNczdnbWZkdlg3T0hJN3lrbUpOeGlPQ29JT1RLSERIT2o3d2NCYjQ5TjdUVHl5Ty1OVmNwWW5FWk1TUE1xZzJzQ1o4d2NkeVpzUTNxeG95QTBNbEk2YXFNbVc4cU9mSDlESEhPWk5JUWNVREx4UndHSjF4WWdibmlLbms5WFB1d3k3UW9PcGFuUmhBSS1ZdHlwcFlCYXhJVEt6S01Pclh6b2d6Vlo4OE9sRzhYdk1LUjl1Q3RnSXNmcEc0T0pBcXdjdmlCV3ZkNGhVbVB6b2l3bHJnTEN3N3V1OEJMOFV5MlMtZXhrUHRWeEplckZYeFlfMnNwNEVDQ1BEZmdlNGo5Vjk0Mmh6SVJQYWUtTkZfWHJaeUJ6LVFRV2IzcTZwOVR5RVRsb0VWc2ZnanhDeVhHUS1ITXZzM1F1OFJrZGpCcFFpZjA5WDVkM2w1bEsxbWF1UWhwOHNTZWcwbURFWW1mQkhGbEhjaGptNGtoVVk5NWF5cHBfNng4QkM1dERsYldrbTBNd0tKc1R1Z3NsZU9ReF9NTmdta3NEVXhVODlaNFBVRG14eDdiTzRiWWVZNUFDNXE2dWM4LW1HaHlRNE43ZDNMd0NHbHZ6RmZzM3FqWU16Mi1nYnJqNXgzUzRKWmNJbnBHbWZrRWg2QWZ1UDJjWFM5bjQwOVJGT1RmSlAwZF9XRjhtUmVwcUFtNWdDZk9pUTF3cUdPSjZjZERxbUhNbkNOUWR3U2NfZjFqSnowMzdjRVhYdHFSY0Fkc2ozRkNOd0gwbDRNaE03NEtoM3ZzaVJoa3BOakotY2ZDRDI1eVlnN1FNaEVrbUdKQjYzTEdZWkVwWHg0cGw0aGZfTkFoSVVNWFVMSUlCa2MxWWZmX3ZiWjhFRGJzOEJHV0RYZEh1VkJ5b3hjamNNZ1dLNU9KbFVrTTBUT25UT0p6dGJ5U2tfSUozNjF4clRyOFk1WGNaVkU5OTUwYXZZTEx3QlVfTnc5c1lxLXgxek5XU2RacFZRT0xPUGpqMHZoLURXYnVPMmJ5dEh3ai1YaGwyc3FIMUlqanc1eGRTcDhBU1JLaktGTXNnRWh3OTlMS0UyVDQ0ZG9fQThTYmlXMjdFaEFsQ21JelZGQ0pXMWdUMVhFd1RHQ0NtRTdKUkVZZlNoOFFSbmEzcmNLSFVUVzViS0VxUXB5OTVaRGRmdkpOMUYtMjJjUlNLazE2bENRMkVqZHRJY2FFd0lka3o2b2NEU1ROcnNhU08tN1RreFhOYlEwZG8xTjNmeWM3RmRzS09qWC04anJTMy1Zcy1LT184Qjg5NVhfbTNBVmtMZ01ZSUh0ZUU2SU5QN2Q1bl9MOU1MTm1NZ0FlVjhQN0FEU051TXpYakZmWWRmV3Vwbzc4UTB4QmtFMzBHWjlIaml1RG1YMUxfM3pzN2lOZE1XT09PcFJGRFNjVTlTWUxDcmdCZGhHLTR2QnNFWEdoQXpLS1FsUmNzb1RSVVNueVhhRGp3TDV0WDZCbDdmbmlPT0JLdjZGeWJ0ZEN4Mm1wOHlNSi1VOUhORVZUV0Ztc2dhZWl6WVAxb2NsSkh6RE1FaGJmWkNvb25RNkZTVWNOZlF3TkItOWZuMm9YbEh5RC1GYnhUMU5YN09Gb05XTFFHMHJZUW9uTFF4TkJ0UVJmYnBfRW90TVE4MnZJa0xIY1dBc0JtMjlrTXBnY201cWpnLURDM0pPQmduc1p0N01pTmRHaXNURkE3eXdsQWtKYUJQbGpsUWx6WFpNVkNFMTFzdmc5SFR4ZGdKSmlmWElYZDlyWFU3eWNfN1hsZVpjYWZlaTBDSUxwZHQ2ei1nTkRvQkV6QWNzR3Jjb2xwUmFmOFZ0a29xOFFUV1kzemtLZnpQVUk0U0JCa0FTRGhkallaT0NHeEtRSTltb2RWZ3FOM1M2d0FuZ1YwNU8zWUR0Mm01aGNOYkxDVVk0dU5SaTFFSy02dGluYzl4NUZ0NlNRMjhTczhsTk9qT3NGTVdNdjRnZ3lMcGVya0VoTE5saV82UDFUYjltQ0dFcW5GUHRCbEg4VVlNaWdBUzUwdVNVVllvOXZVUkRXLUoxT3BBc2NieDdoemhhWnN0UnNCWURnQUlGWE12b1ljM2g0R3hUbW9xNHN5NHNmVE5xblFWY05IQ2RPRGxockx0M2hiMkZheDZFOFFybmVTMFJQMWFndG9EQU82SGs4TjZfd09IdmZ0bnZHRlpTMzM0YV9MVElMUkxUa0FZRFp0M2UwREo2Qkczd1RNMkFsNjk5VlN1R1N0dmNHX1RKLTBJSFVLVUQ2NGo3dzhZcWJseXdFM1NCbUF2ajJfc0V1ZHVOV3E5RzJhMThUSy1DMWkySVd1ZEloekxpTWhldzFOS0RCRXVqU0g4c2FfaUNPWmtZMEpTT0xyMEpqTEtkWEliaVl5eGoyQkhTaEtuN3FfSFZWY19GS0E0dlJIZ3pEaFFuTC0yMWhpTWwxRHJtQTZUdXQ4ZFk5eFlDS2RwcjJnTG45aGo2Z1NkOTBsbFpNSWVIblZGa1BueXIxWGdJc19qT0otY1Vja1FteGlVaFJxVWJsU3JGTkNsTHVVaF9PZFBMbU9ORTk3cVh3T0EwbFVWUFVVY2VuRHpXNHFVMDN6ZlhET3Z2Z25GdWEwb1VQb2dYMi1wWkduaTN0UEhHb0c5MUlrX2MyYzFzbmhIMnd0akxtenBaa3dEZzJ1SGx6T19nZ1VvbmNrb0JWQ1cybVFzcEhZLWpOQmwtVUk9) 
        FCI_KEYSTORE_PATH: /tmp/keystore.keystore
        FCI_KEYSTORE: Encrypted(Z0FBQUFBQmc0RC1vTkFvazhxZjAtQnZNLWV0ZlhZV2VEaDN1bktDNEwxelBkY1RDQzhqMTFnNjczbmtmWnp6eHZGbDJKZU90SGdTRTM4cXZiUjUtNXl3bEQ5WGlwWFlSOHl5c2lmc1ZjY3RPRmhvVmY0eVc0VldQcGVlNVp0RnE2LVF3SUdZcmpxU0N1dlc5QUZNb240LUZkYURTenBxb3VCamd0UjE5Y29kQnZvQS1yTzFnOGhGSG90djlVRjE3MXdEdmQwcy1XckZoVGh0WktFZHZlV2xHWnlzeTZEc1VDWDNsczZ2RTllNk5PX1d4N3pSWXBHTERlNk5obUNIdmhwZWV0QW14UlVDNVAxdnNncEh5N1hQalgyb3lNVkwyZm5SMnRYZUJ4LVVpZHJWTzNEWGt3QlYyQU5ZZXc1MG95Ym1NQWhkVU51dXBlNXBpNTZVTG14Rnh3ZWU4RVBpYWVaQkl3b2ZwZ3BrOXc4TVVyUmxzYXRqeE5VUnlvYS15Q0podGpnUW4wYmJnMXUtalBtdFlLbWk1VG1velg3WG5lOE9xOGFTdC1GcmdQeW92clk2OTQzQXlNYlRhSVpBNTBrNHJQYkJRLUxCYmxSVldqTUZac1Vsa0lXbEhrYVZiN0NxaXZoN2d4cmk2TkE0SExZNDhoTWVWZG5TVVpJdTJjRzhObDlQN0xiVk52U1Jrc0NKVTdpWmJ2eGxZc0MwWmdKeFpHMHZBcE1vWUZlUzNzSk83ZWpHeERGSGVQY1kxVTByc2E1c0YwVU5zc1ZPaEZWNnBfRDBNSDZLZ2JlNE9oeDU5WTlsdW96WTVwV3BybEd3dzZRQk45ME1ORjdJOFl5WVQzNjRITEZELXVCV3N6RXQ3OFAxbGFnWENBenJuOUFNMWR6aWZWcVpnUlI0X2JoT1cyV3czMUpXeVhGeFRqY1JJMXZYbU84dlhHOGFSSzFTVmJXWmhTV2ZSTm9uMElrSHQyRTJGYjktVkNYREtkR003WUVOd0J3NzdQd3VQNVFySllOUFhJcm5Ub3VqTVJUN3Rrdi1VMjhDQVE3Q3UzYnI2SVdYWFJUb0FJSUFJbnVIeHZ1bko5OGhTVUxycXpoUDJfN3VYVHpuWVQ4amdJV1I2UExzQi1VLTY4SzhfMHpyM052NUN6YVZ1TGxrRFM5WDZ2Qm96SldaUlRjTFlUZWdaOEFfX3hKV3A2MmlnX1l3dVJoLWVSRWQ3YmZGZHJjY09RdWx1dllhRkFJWWxjb3BtQjgxSHA3dVZuSDlUOV8xb3VfaUNDWWowOVFwWUxYS045cnRmaHhNTG50Q0pTUjFfTU5pdzk4Sl9DOUVJT0FuYlBxZzZzcEQ3S2llMlExeWRxVEdpMWZGbEtDaEI0cFhOMVRkbkpsQjIxOUFmRVRPSXZBTHJ2WTFuOVh5QkJoWl9PWkpOOFUxWm5SY2xwYkZQYWhsTFpJcm5aeWZONmF0WWd3aFloVDVFY0E4dUNDTWV4SnpEVmhrMDIwV21uZHNubUtuYUtmZ0dCU3E3UDZGeVdyX1FJNzBtVlF3TUVMRFBaZ3BIeWVQbkU0dFBhMWhCYzJTSWlPXzQ3Tlo5OG8zdEI2dEhGLTVKLXFmYXZZV3ozSGVhbjJIUGR2R1ZNYVRpc2llZjhHS2s1c0wxbk0zRDdrWFpacGtmZTllYzdLcHBtQlJQV0ZJNF90UGtPSXV5c2dfRDl5SW9GcVJ4Q21iRG5aS1gxUHFWRXpiVFJZVFVEM1FJaVJPejJUbndtd2s4WjA2b0k2cVlJQ1BXbTB2Z1dTZHlwYkdmcVpYZXBfOEZBam12MUZxSHVhVks5X2l3Rk55YjA4cDhwcGd2OU9kd05uYWRJMVl4MjQ3dmM1VVBGOG1ESFdNbFRaYjNPSUdUTllJSXJCSC1MZXFQLUtTYjE4NzFSOU9IaHVxYkdjMHlIeWpSWmpkSDI2QzZVS2IzQjI3cDZJU3ZZdndvR1BHYTZGMXVybm4zTG1ISTQ5OGNLNHBhRnEwQzRiNHZnbWdWODhEazlYM29XWmsySkY1NjI0UENxbHlxS2U3QkZyX0Y2cG9LZkNCVGJTeUU5VWxOUXhiaEoxYVBqMHVHa2Y0SjhzdHpxa2hhS1FDWldJVzlmMjVpYXJEMHNXYjVKRzRCNWdndWU2WlBybDNZVzlqcTZLUGwtRDdzb0ZfakJyd1lJMTNNNFJMSmRtSEpIemdSNEVZNUVJa212eTIzT1NuQXdBVVFOMUZfS281dDJrQlJoeVV5V2NWbVJRRk96MjQ4b0E5bWgtQkloYTdBSEFpcUw3U1RDaGFHaFFtSVNvSlY1Ni02R1c0bmFiNjFJdHB6VkZhc3hRbmlwckc4d3JZRGlVd0kweVlwdlJjWDl1WktyelExdk5Za3JzU1VIMG5xdk13b21RR2NhdW1YbHp2ZDMxS3pmSjFvVEtSQVpMbmI4THotTVFCbWZHU1VodE5aTjhTUWJ3aFY4ZFJDVnJWWHR4dVlEOXp1UURMakszMG9BVDZxYldDVmE1VER6SU9fdTkySmN2ZVZxZ2dHS05JWG5wdzBRN3E2VnhFRTBnMXZwX1JodWZRYmwyWjIwVG0tSVlONUVPeWg2dUNiRERDQ0lFeTVGUEp0eEVEYndYaVNucFBicFF0dkJrVklCbkEtMzVscUZZZXE1MG1OaEF2NUEzZjYycTkwcVNfRUNZNTRGSXZ1OS1HU1VkbVJPQlctYTFST2pZTjNVcHJOYzFZRllZUzdVWkFranNmWG44czMxN0FfZEFRUml5VzdzZ2pnNnJpRHdjb3ZrRXkwUG9ETk9CZFlQT2JEYm1Qc0hvUjRQVTRTaFl2MUFyRVpsS1N0QmtpTG96aWpQYlVWSVBNUUUzV0V5R1FNb0lReWM0NGljNWxWV2VvaDNKd0FFSjEzT0gzeWFOYnFqYVBOR3hIeGwybER3ejE3cmhKNmU1X3hZQ1A2T3gwUFBISkZGZm5UXzJKT2l6T0pxV2FLNExlRXU5X1RjTkxTblpmazc0RzVTX3k3c3h3MUwtdUFyMVZ4QnhFLWxNdWpCX0ZZOHhNM2p0XzVsQk11VzZ4azktZFQ2SlV4UUsxb1gzdzhIWFc1ZEJidTMtdE5ObzRuNDRkUk94SmVZQ2o2MjJFS1JidjZWMG9ZQTUzVjZvSlNnUy1taDZBc0lDbFBpQW1FOVhLSjc1LWRzY04zY0gtNTQxVXduTkFWN3RFblJTUnNCbG1nVElJNEctWjJjd0lxMHZWMldBN0F1VlY4TkpsVXVvQWI2S2NNXzJGY3R3aUtzVngyc0ljOHZaeUk5b0VILVNGdnFaVDQ2OFN1dFZiTGpkUmYyT1VqNnV1ZGpXeDJEbnFBOXUwaVZiMUE1SnZzVGVpZFNvdjdqYWlBcnFKRkVoMUZNZkg0eHlRbVRSS0pJZlVGbllIVXZwY3ZDY29CNE5zQV8xZ3lia2xsMm9Pdy1Gc2I3eHpxQ2VOWFpfQUlfZWF0SzE0cTQ0RGduMlpkRnRyc1lKQW1KUTNaYWs5TFlaZl9QbVpIMkR0SEJBRENLTml4MG11UVBTV2NXNWQxdjEzenV0ZXFMcmpwNFhRZUN3SnB4THhVaXZxemZ4Nl96QnZIbi1NSnlWSjFMWThUQ2ZWUWRJVUphNEFCbzZ2LUMtLTlEYjFCcTRVeEFBbjB1dG92SXNHWVJOM3RnYVVESnNKeVFDR005dTE3RkZIaEo5WVJtWFdLYzhBYzZJMEMwempXNWU4Z0RWejhsdGE2Ty1YbkdPYjBYUy10RUNTamUwQ1dfSGpEZ0stYmNPWkZlTGY5c0xWVUJMazhfOWlNQWo3bHVma3VTZHVTMUxlSU5XVzhPREJGRlF6ZllsdkxRaU9CUWNXOXdoaVRzYkVxeExsSnhHMFFBYlRBb3NTcTlnZUZHYU9URDdHbWRCRjZ6RDJWeXZsZm4xSjY1UXRZMVhYMHduTjNHVk8wMTFjNDRiZ0I3TkhEXzdmU2lZNkVBaUxJZTJiZlpmMDF2cXZtSEpObTNabTBRem5WdmhQcU5HX1dJalZHVzJJLUJVTVk4V2Z2SUJaZ29wdFpONktMOFkxdzhiZElqdXZ1UUp6MklfYWFjdHItMUJ4YUk2UF82OWJYck52VW5lX0tZYTIyeWxSaE1POHlZajZzWHVaYVRRRm42Zkt6S01rZHY4Vkc0cFVlR25vQTFGMHJrSlBuVkZoU2dpSHVwRnFyRWlpR0hJVHIteFk4LWV6NU03c3h0bU5xa1NkWmtkUWpqdURWRjR5RFBQWEV6dG1rbWE4Ujg0WVNnVlhmOWVNYWxNSVgyWDZmc29OeFJfbllrcXZUM3pGZU1MRHlqdm9DU0x4eDlfVFh6OEVWazV3NTlSSWRVWEk3RmtMQnhOWmFjWFg4WnpEVzk2VURaUFVfVkNmSTY1S2l1bGJjaG53OUJRSGJpU2VrQTlHQlhzbXItdlVMS2VJb1RObzVCMzBfYnh3STNIc1gwVi1oY1NFbkxheVpUekhwb1F5SDdPcXNFZjZ1Mm5Ic0k2Wjh4NUdxM1hVbk00eFpnT2pJWEo5QkRvcVVYZzhqcE9RclVDeEFfQ2t4czc3cU5OWkkxa3ZEUmFOOG1UdGJpT1RBZGY5WDZXT0laX3VQZmpWOGZSTUpWVmdFcjc2WDBJNVVWSWNsZ0RraUV0bXh1Wks0d0xGWG93Vl9oWGpDaUFhZlhicXEzTVBtbS1jRmR3TTBsR1U3TzVDWktWb00wNGVKSEp3aUtENl9uSElNbjg5eGk0STE4ZXQxa2xJVDIwUFdLTmxlSXcyRHIxeTB5d1UxakhuUlhjcWMtMTdnYlVjREh3RGpUb0VwdWloMFUxb2xjRlhPUWNUUlYwOFVMZTNaeE91YW4wYmZaTG9ZQklKRDdId2Z3S0E3d3RyV2ltVDJ6X0ZaczRpRWRyWnduM0c2LWtOcjR1VHhtQ2dKRnpSaUpLUHhVVEpJVnVJWURIQlVwMjdJMmtHeDM1SjV6LWp6cXZGN3Uzd1NYVm1fZlhUSEZqRTQ2VzJKeTVzeHJHYmFWay1qcGdwemNrQzUwbnh6cnprWC1ZUVpXcHpMeDBjNk5pS1lidlJBVS1ucnJVMEtWZmNPU0V0M01TckhfNnB2bkVBbWZ3NlRYNTRBVWl6Z1FyMVBEU3VFRkhOR2c5UGZlWG5KREJZcnNWZmlEUFM4YjItd3lEbDEybFhIeUZPc2lRRWNENlV4QTR2eHRHMGZDdkRoLXBGQVJjQlFkNFdldDAyUVdfU0pfVFItYzhIa2w3dlNGQkFNVVo2a3dmNnV3NnFRTnV6S1BwUWp2TXVqT0I0bFY1a29pUVlJbGs1bXN6dW45cVR6Z0FudEM4alo4YmZJeWRMSUVpSTd5aktlcGZnWl9VUElCTHdTRTM3anRiOGJHVG9uWGwtMXpEWVpiaHo2QThqc3lPX2cySXhxMVhnVTROWVctMmI0bC13T3NTWnpEYklqZmlsWm9FTkVmUlJwTnRSLS00NFBQeDJ3eXJENUhWT29kWmFfaGYwR1lHN2V3Vkl5M2ZILUxYX2hNZmV1ekRFUGctdXY5OFBzT3VWZHBFeDkzUnNqRHZGUms5WXBkZGZSbm5wQ1pzRFdXdnZmWjB4bENpVm1iTHJwQWtYTzFzbzh6ZVVDYnowMk5FVmpxck1RM0NqX3BJVTZMdEtEQzU0MWI0b3M4S0ZuUENTcV9HM2FkRmYwa3RYR0RYXzdiM05BdkdBMkQtaHhGWDMwUnV4NTN6ckFwNlRaTW1LTUF4T0RRZW1KZGRUalI1MTBMZzlGWUJZYlVVMmdybVZaWXJSWTR0Z2RQVkFvWU5YYzZGUURORTlwYWhIZEo3Sy1LZmxmM2dJZGhjMUFkVEtkNy1aUUx4SGxNeDhxZ01JY3Ffd3hveEtnVUxILUMzTm5oUlJvV1AtVUsxaHkzN2JOYmlpM2VuVTdBQ1F3U1dMTWtwMmIxekdMY2RvQVJVenRCZGZJLXBlYkp2MGlMemFKWVBOQ0pzNGVZTU15V292YVowYnVRbGNsUnVydkdUUS0zQ0Vwdl9IZ3RvUzItZE5KeEdkRGpZMHBRQVI1eGJ0cjk1Yk43MkZxcHZqeWpnSDF6eWR5TTJMSDRHS1l4NnNoNEsxemRlZGlhelBsd29jb0tMYzFiNV9kUVU3cGozSWNuLVJ0Y3lnUUI4WEx2dWZhcTJOWG5CbThpdlpkdGVmZnFMYWNQeFI3SVdsdy00SXV1RW1BUGc9PQ==)
        FCI_KEYSTORE_PASSWORD: Encrypted(Z0FBQUFBQmc0RC1vQVo0eGpLSTl6ZzYycURuSl9tNGo5aUd5N2pHU254cjFmZ0dZRHNSakNaOXN2VVp1eGRVOC1QWUR1QTRCTWtCbnFrSUR3c1pIWGdDdE5NaEZCX2pleUE9PQ==)
        FCI_KEY_PASSWORD: Encrypted(Z0FBQUFBQmc0RC1vQ2ZqeXhMQjF6S3VScWJDLXZtejRlemxkZlBoYXdNS2dLWktxUVdGNmxSY1lWNmNnRjU0MEk4elh1Y3oya0ZBOFlESHZyeGktMG5Oc1R3TlRGaTdkRXc9PQ==)
        FCI_KEY_ALIAS: Encrypted(Z0FBQUFBQmc0RC1vX1FtYXF1VmluMHJHQ2tTSEF1TGJjRGhXUWp4SFE1aHpOSExRajN5d0lmb0RDZmJ2MkRTVTR4Y0J0ODlCcmFmTnVfekJDcHVJLW9pNE95SG9EU1d2M2c9PQ==)
        PACKAGE_NAME: "com.devlog.testci"
        GOOGLE_PLAY_TRACK: "alpha"
      flutter: stable
      xcode: latest
      cocoapods: default
    cache:
      cache_paths: []
    triggering:
      events:
        - push
      branch_patterns:
        - pattern: '*'
          include: true
          source: true
      tag_patterns:
        - pattern: '*'
          include: true
    scripts:
      - name: Set up key properties
        script: |
          echo $FCI_KEYSTORE | base64 --decode > /tmp/keystore.keystore
          cat >> "$FCI_BUILD_DIR/android/key.properties" <<EOF
          storePassword=$FCI_KEYSTORE_PASSWORD
          keyPassword=$FCI_KEY_PASSWORD
          keyAlias=$FCI_KEY_ALIAS
          storeFile=/tmp/keystore.keystore
          EOF
      - name: Set up local.properties
        script: |
          echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/android/local.properties"
      - name: Get Flutter packages
        script: |
          cd . && flutter packages pub get
      - name: Flutter analyze
        script: |
          cd . && flutter analyze
        ignore_failure: true
      - name: Build release APK
        script: |
          cd . && flutter build apk --release --build-name=1.0.0 --build-number=$(($(google-play get-latest-build-number --package-name "$PACKAGE_NAME" --tracks="$GOOGLE_PLAY_TRACK") + 1))


    artifacts:
      - build/**/outputs/**/*.apk
      - build/**/outputs/**/*.aab
      - build/**/outputs/**/mapping.txt
      - flutter_drive.log
    publishing:
      slack:
        channel: '#random'
        notify_on_build_start: true

      google_play:
        credentials: $GCLOUD_SERVICE_ACCOUNT_CREDENTIALS
        track: $GOOGLE_PLAY_TRACK
        in_app_update_priority: 0
